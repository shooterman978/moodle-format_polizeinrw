{"version":3,"file":"colorpicker.min.js","sources":["../src/colorpicker.js"],"sourcesContent":["/**\n * Color picker module for course format settings.\n *\n * @module     format_polizeinrw/colorpicker\n * @copyright  2025 Jonas Rehkopp <jonas.rehkopp@polizei.nrw.de>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function($) {\n    'use strict';\n\n    /**\n     * Initialize the color picker.\n     *\n     * @param {Array} colors Array of color objects with {index, color, label}\n     */\n    function init(colors) {\n        // Wait for DOM to be ready.\n        $(document).ready(function() {\n            // Find the templatecolor select element.\n            const selectElement = document.querySelector('select[name=\"templatecolor\"]');\n            if (!selectElement) {\n                return;\n            }\n\n            // Get array of enabled template indices.\n            const enabledIndices = colors.map(function(colorData) {\n                return parseInt(colorData.index);\n            });\n\n            // Filter dropdown options to only show enabled templates.\n            const options = selectElement.querySelectorAll('option');\n            options.forEach(function(option) {\n                const optionValue = parseInt(option.value);\n                // Keep the empty/default option (value 0 or empty) and enabled templates.\n                if (optionValue > 0 && enabledIndices.indexOf(optionValue) === -1) {\n                    option.remove();\n                }\n            });\n\n            // Create the color picker container.\n            const container = document.createElement('div');\n            container.className = 'polizeinrw-colorpicker';\n\n            // Create color circles only for enabled templates.\n            colors.forEach(function(colorData) {\n                const circle = document.createElement('button');\n                circle.type = 'button';\n                circle.className = 'polizeinrw-color-circle';\n                circle.style.backgroundColor = colorData.color;\n                circle.setAttribute('data-color-index', colorData.index);\n                circle.setAttribute('title', colorData.label);\n                circle.setAttribute('aria-label', colorData.label);\n\n                // Mark the currently selected color.\n                if (parseInt(selectElement.value) === colorData.index) {\n                    circle.classList.add('selected');\n                }\n\n                // Click handler.\n                circle.addEventListener('click', function(e) {\n                    e.preventDefault();\n\n                    // Update the hidden select.\n                    selectElement.value = colorData.index;\n\n                    // Trigger change event.\n                    const event = new Event('change', {bubbles: true});\n                    selectElement.dispatchEvent(event);\n\n                    // Update visual selection.\n                    container.querySelectorAll('.polizeinrw-color-circle').forEach(function(c) {\n                        c.classList.remove('selected');\n                    });\n                    circle.classList.add('selected');\n                });\n\n                container.appendChild(circle);\n            });\n\n            // Hide the original select and insert color picker.\n            selectElement.style.display = 'none';\n            selectElement.parentNode.insertBefore(container, selectElement.nextSibling);\n        });\n    }\n\n    return {\n        init: init\n    };\n});\n\n"],"names":["define","$","init","colors","document","ready","selectElement","querySelector","enabledIndices","map","colorData","parseInt","index","querySelectorAll","forEach","option","optionValue","value","indexOf","remove","container","createElement","className","circle","type","style","backgroundColor","color","setAttribute","label","classList","add","addEventListener","e","preventDefault","event","Event","bubbles","dispatchEvent","c","appendChild","display","parentNode","insertBefore","nextSibling"],"mappings":";;;;;;;AAQAA,uCAAO,CAAC,WAAW,SAASC,SA8EjB,CACHC,cAvEUC,QAEVF,EAAEG,UAAUC,OAAM,iBAERC,cAAgBF,SAASG,cAAc,oCACxCD,2BAKCE,eAAiBL,OAAOM,KAAI,SAASC,kBAChCC,SAASD,UAAUE,UAIdN,cAAcO,iBAAiB,UACvCC,SAAQ,SAASC,cACfC,YAAcL,SAASI,OAAOE,OAEhCD,YAAc,IAA8C,IAAzCR,eAAeU,QAAQF,cAC1CD,OAAOI,kBAKTC,UAAYhB,SAASiB,cAAc,OACzCD,UAAUE,UAAY,yBAGtBnB,OAAOW,SAAQ,SAASJ,iBACda,OAASnB,SAASiB,cAAc,UACtCE,OAAOC,KAAO,SACdD,OAAOD,UAAY,0BACnBC,OAAOE,MAAMC,gBAAkBhB,UAAUiB,MACzCJ,OAAOK,aAAa,mBAAoBlB,UAAUE,OAClDW,OAAOK,aAAa,QAASlB,UAAUmB,OACvCN,OAAOK,aAAa,aAAclB,UAAUmB,OAGxClB,SAASL,cAAcW,SAAWP,UAAUE,OAC5CW,OAAOO,UAAUC,IAAI,YAIzBR,OAAOS,iBAAiB,SAAS,SAASC,GACtCA,EAAEC,iBAGF5B,cAAcW,MAAQP,UAAUE,YAG1BuB,MAAQ,IAAIC,MAAM,SAAU,CAACC,SAAS,IAC5C/B,cAAcgC,cAAcH,OAG5Bf,UAAUP,iBAAiB,4BAA4BC,SAAQ,SAASyB,GACpEA,EAAET,UAAUX,OAAO,eAEvBI,OAAOO,UAAUC,IAAI,eAGzBX,UAAUoB,YAAYjB,WAI1BjB,cAAcmB,MAAMgB,QAAU,OAC9BnC,cAAcoC,WAAWC,aAAavB,UAAWd,cAAcsC"}